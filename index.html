<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDOGRA - Pedidos</title>
    <style>
        :root { --azul: #007bff; --verde: #25d366; --gris: #f8f9fa; }
        body { font-family: sans-serif; background: var(--gris); margin: 0; padding: 10px; }
        .card { max-width: 500px; margin: auto; background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 15px; }
        .logo { width: 120px; height: auto; }
        h2 { color: var(--azul); margin: 5px 0; }
        input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        #search { background: #fffde7; border: 2px solid var(--azul); font-weight: bold; }
        .lista { max-height: 350px; overflow-y: auto; border: 1px solid #eee; padding: 5px; margin-top: 10px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        .item-info { flex: 1; font-size: 0.9em; }
        .qty { width: 65px !important; text-align: center; border: 2px solid var(--azul) !important; font-weight: bold; }
        .footer { position: sticky; bottom: 0; background: white; padding: 15px; border-top: 3px solid var(--azul); margin-top: 10px; }
        .total-box { display: flex; justify-content: space-between; font-size: 1.3em; font-weight: bold; color: var(--azul); margin-bottom: 10px; }
        .btn-ws { background: var(--verde); color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1.1em; }
    </style>
</head>
<body>

<div class="card">
    <div class="header">
        <img src="edogra.png" alt="EDOGRA" class="logo">
        <h2>EDOGRA DISTRIBUCIONES</h2>
        <div id="fecha" style="font-size: 0.8em; color: #666;"></div>
    </div>

    <input type="text" id="cliente" placeholder="Nombre del Cliente">
    <input type="text" id="tienda" placeholder="Nombre de la Tienda">
    <input type="text" id="dir" placeholder="DirecciÃ³n (Calle, Barrio, Ciudad)">
    <input type="text" id="vend" placeholder="Vendedor que atiende">

    <hr>
    <input type="text" id="search" placeholder="ðŸ” BUSCAR PRODUCTO..." onkeyup="filtrar()">

    <div class="lista" id="lista"></div>

    <div class="footer">
        <div class="total-box">
            <span>TOTAL:</span>
            <span id="totalDisplay">$0</span>
        </div>
        <button class="btn-ws" onclick="enviar()">ðŸš€ ENVIAR A WHATSAPP</button>
        <p style="text-align: center; font-size: 0.7em; color: #999; margin-top: 10px;">App desarrollada por Vibras Positivas</p>
    </div>
</div>

<script>
    // LISTA COMPLETA DE TUS FOTOS
    const DB = [
        { id: 1, n: "Detergente 3D *125GR PC*96", p: 1335 },
        { id: 2, n: "Detergente 3D *1KL PC*12", p: 7565 },
        { id: 3, n: "Detergente 3D *250GR PC*24", p: 2580 },
        { id: 4, n: "Detergente 3D *2KL PC*6", p: 15115 },
        { id: 5, n: "Detergente 3D *3KL PC*4", p: 22020 },
        { id: 6, n: "Detergente Fab *450GR PC*30", p: 5345 },
        { id: 7, n: "Detergente Ultrex *125GR PC*96", p: 755 },
        { id: 8, n: "Detergente Ultrex *1KL PC*20", p: 5560 },
        { id: 9, n: "Detergente Ultrex Manz *500GR PC*40", p: 2800 },
        { id: 10, n: "Blanqueador Patojito *1000ML CJ*18", p: 51465 },
        { id: 11, n: "Blanqueador Patojito *1800ML CJ*12", p: 59545 },
        { id: 12, n: "Desmanc Ropa Blanca Pat *1000ML CJ*18", p: 6115 },
        { id: 13, n: "Desmanc Ropa Color Pat *450ML CJ*24", p: 2655 },
        { id: 14, n: "Suavizante Suavitel *1LT CJ*12", p: 8350 },
        { id: 15, n: "Suavizante Aromatel *900ML CJ*12", p: 8900 },
        { id: 16, n: "Jabon Rey *300GR CJ*25", p: 72555 },
        { id: 17, n: "Jabon Caiman Azul *230GR CJ*25", p: 42225 },
        { id: 18, n: "Lavaloza Axion Barra *150GR CJ*72", p: 2225 },
        { id: 19, n: "Lavaloza Axion Barra *450GR CJ*24", p: 6170 },
        { id: 20, n: "Lavaloza Patojito *450GR CJ*36", p: 3695 }
    ];

    function mostrarFecha() {
        const ahora = new Date();
        document.getElementById('fecha').innerText = ahora.toLocaleString('es-CO', { timeZone: 'America/Bogota' });
    }
    mostrarFecha();

    const listaDiv = document.getElementById('lista');
    DB.forEach(p => {
        const d = document.createElement('div');
        d.className = 'item';
        d.setAttribute('data-n', p.n.toLowerCase());
        d.innerHTML = `
            <div class="item-info"><b>${p.n}</b><br>$${p.p.toLocaleString()}</div>
            <input type="number" class="qty" id="p-${p.id}" oninput="calc()" placeholder="0">
        `;
        listaDiv.appendChild(d);
    });

    function filtrar() {
        const q = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.item').forEach(i => {
            i.style.display = i.getAttribute('data-n').includes(q) ? 'flex' : 'none';
        });
    }

    function calc() {
        let total = 0;
        DB.forEach(p => {
            const q = document.getElementById(`p-${p.id}`).value || 0;
            total += q * p.p;
        });
        document.getElementById('totalDisplay').innerText = `$${total.toLocaleString()}`;
    }

    function enviar() {
        const c = document.getElementById('cliente').value;
        const t = document.getElementById('tienda').value;
        const d = document.getElementById('dir').value;
        const v = document.getElementById('vend').value;
        const f = document.getElementById('fecha').innerText;

        if(!c || !t || !d) return alert("Completa Cliente, Tienda y DirecciÃ³n");

        let msg = `*FACTURA DE PEDIDO - EDOGRA*\n`;
        msg += `--------------------------------\n`;
        msg += `*Fecha:* ${f}\n`;
        msg += `*Cliente:* ${c}\n`;
        msg += `*Tienda:* ${t}\n`;
        msg += `*DirecciÃ³n:* ${d}\n`;
        msg += `*Vendedor:* ${v}\n`;
        msg += `--------------------------------\n\n`;

        let total = 0;
        DB.forEach(p => {
            const q = document.getElementById(`p-${p.id}`).value;
            if(q > 0) {
                const sub = q * p.p;
                msg += `ðŸ”¹ ${p.n}\n   Cant: ${q} x $${p.p.toLocaleString()} = *$${sub.toLocaleString()}*\n`;
                total += sub;
            }
        });

        if(total === 0) return alert("Pedido vacÃ­o");

        msg += `\n--------------------------------\n`;
        msg += `*TOTAL A PAGAR: $${total.toLocaleString()}*\n`;
        msg += `--------------------------------\n`;
        msg += `Â¡Gracias por su compra!\n\n`;
        msg += `_App desarrollada por Vibras Positivas_`;

        window.open(`https://wa.me/57317849331?text=${encodeURIComponent(msg)}`);
    }
</script>
</body>
</html>
