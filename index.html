<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDOGRA - Sistema de Pedidos</title>
    <style>
        :root { --azul: #007bff; --verde: #25d366; --gris: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--gris); margin: 0; padding: 10px; }
        .card { max-width: 550px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 15px; border-bottom: 2px solid var(--azul); padding-bottom: 10px; }
        .logo { width: 140px; height: auto; }
        h2 { color: var(--azul); margin: 5px 0; font-size: 1.4em; }
        input { width: 100%; padding: 12px; margin: 6px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
        #search { background: #fffde7; border: 2px solid var(--azul); font-weight: bold; position: sticky; top: 0; z-index: 10; }
        .lista { max-height: 450px; overflow-y: auto; border: 1px solid #eee; padding: 5px; margin-top: 10px; border-radius: 8px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 12px 5px; border-bottom: 1px solid #f0f0f0; }
        .item:last-child { border-bottom: none; }
        .item-info { flex: 1; font-size: 0.85em; color: #333; padding-right: 10px; }
        .item-info b { display: block; font-size: 1.05em; color: #000; }
        .qty { width: 75px !important; text-align: center; border: 2px solid var(--azul) !important; font-weight: bold; background: #e3f2fd; }
        .footer { position: sticky; bottom: 0; background: white; padding: 15px; border-top: 3px solid var(--azul); margin-top: 15px; border-radius: 0 0 12px 12px; }
        .total-box { display: flex; justify-content: space-between; font-size: 1.4em; font-weight: bold; color: var(--azul); margin-bottom: 12px; }
        .btn-ws { background: var(--verde); color: white; border: none; width: 100%; padding: 16px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1em; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn-ws:active { transform: scale(0.98); }
    </style>
</head>
<body>

<div class="card">
    <div class="header">
        <img src="edogra.png" alt="Logo EDOGRA" class="logo">
        <h2>EDOGRA DISTRIBUCIONES</h2>
        <div id="fecha" style="font-size: 0.85em; color: #666; font-weight: bold;"></div>
    </div>

    <input type="text" id="cliente" placeholder="Nombre del Cliente">
    <input type="text" id="tienda" placeholder="Nombre de la Tienda">
    <input type="text" id="dir" placeholder="DirecciÃ³n completa y Ciudad">
    <input type="text" id="vend" placeholder="Nombre del Vendedor">

    <input type="text" id="search" placeholder="ðŸ” BUSCAR PRODUCTO..." onkeyup="filtrar()">

    <div class="lista" id="lista">
        </div>

    <div class="footer">
        <div class="total-box">
            <span>TOTAL PEDIDO:</span>
            <span id="totalDisplay">$0</span>
        </div>
        <button class="btn-ws" onclick="enviar()">ðŸš€ ENVIAR FACTURA A WHATSAPP</button>
        <p style="text-align: center; font-size: 0.75em; color: #888; margin-top: 10px;">
            App Desarrollada por <b>Vibras Positivas</b>
        </p>
    </div>
</div>

<script>
    // BASE DE DATOS COMPLETA EXTRAÃDA DE TUS IMÃGENES
    const PRODUCTOS = [
        // DETERGENTES
        { id: 1, n: "Detergente 3D *125GR PC*96", p: 1335 },
        { id: 2, n: "Detergente 3D *1KL PC*12", p: 7565 },
        { id: 3, n: "Detergente 3D *250GR PC*24", p: 2580 },
        { id: 4, n: "Detergente 3D *2KL PC*6", p: 15115 },
        { id: 5, n: "Detergente 3D *3KL PC*4", p: 22020 },
        { id: 6, n: "Detergente 3D *500GR PC*22", p: 4005 },
        { id: 7, n: "Detergente Barra Dersa *250GR CJ*2", p: 65075 },
        { id: 8, n: "Detergente Fab *100GR PC*112", p: 1425 },
        { id: 9, n: "Detergente Fab *225GR PC*54", p: 2910 },
        { id: 10, n: "Detergente Fab *450GR PC*30", p: 5345 },
        { id: 11, n: "Detergente Fab *4KL PC*4", p: 42770 },
        { id: 12, n: "Detergente Fab *5KL PC*3", p: 44160 },
        { id: 13, n: "Detergente Fab *700GR PC*18", p: 8010 },
        { id: 14, n: "Detergente Ultrex *125GR PC*96", p: 755 },
        { id: 15, n: "Detergente Ultrex *1KL PC*20", p: 5560 },
        { id: 16, n: "Detergente Ultrex *250GR PC*48", p: 1740 },
        { id: 17, n: "Detergente Ultrex *2KL PC*8", p: 11920 },
        { id: 18, n: "Detergente Ultrex *3KL PC*6", p: 15460 },
        { id: 19, n: "Detergente Ultrex *500GR PC*40", p: 2800 },
        { id: 20, n: "Detergente Ultrex Manz *125GR PC*96", p: 755 },
        { id: 21, n: "Detergente Ultrex Manz *3KL PC*6", p: 15080 },
        { id: 22, n: "Detergente Ultrex Manz *500GR PC*40", p: 2800 },
        // BLANQUEADORES Y LIMPIAPISOS
        { id: 23, n: "Blanqueador Patojito *1000ML CJ*18", p: 51465 },
        { id: 24, n: "Blanqueador Patojito *1800ML CJ*12", p: 59545 },
        { id: 25, n: "Blanqueador Patojito *3700ML CJ*6", p: 58345 },
        { id: 26, n: "Blanqueador Patojito *450ML CJ*24", p: 25090 },
        { id: 27, n: "Desmanc Ropa Blanca Pat *1000ML CJ*18", p: 6115 },
        { id: 28, n: "Desmanc Ropa Color Pat *1000ML CJ*18", p: 5445 },
        { id: 29, n: "Desmanc Ropa Color Pat *450ML CJ*24", p: 2655 },
        // SUAVIZANTES
        { id: 30, n: "Quita Manchas Ultrex *150ML CJ*12", p: 1360 },
        { id: 31, n: "Quita Manchas Ultrex *450ML CJ*12", p: 3190 },
        { id: 32, n: "Suavizante Aromatel *180ML CJ*36", p: 1605 },
        { id: 33, n: "Suavizante Aromatel *2500ML CJ*6", p: 19140 },
        { id: 34, n: "Suavizante Aromatel *400ML CJ*24", p: 2575 },
        { id: 35, n: "Suavizante Aromatel *900ML CJ*12", p: 8900 },
        { id: 36, n: "Suavizante Suavitel *1LT CJ*12", p: 8350 },
        { id: 37, n: "Suavizante Suavitel *430ML CJ*24", p: 3010 },
        { id: 38, n: "Suavizante Ultrex *900ML DP CJ*12", p: 4480 },
        { id: 39, n: "Suavizante Patojito *180ML CJ*48", p: 1200 },
        // LAVALOZA Y JABÃ“N EN BARRA
        { id: 40, n: "Jabon Caiman Azul *230GR CJ*25", p: 42225 },
        { id: 41, n: "Jabon Caiman Blanco *230GR CJ*25", p: 46670 },
        { id: 42, n: "Jabon Rey *300GR CJ*25", p: 72555 },
        { id: 43, n: "Jabon Top Terra *230GR CJ*25", p: 65325 },
        { id: 44, n: "Lavaloza Axion Barra *150GR CJ*72", p: 2225 },
        { id: 45, n: "Lavaloza Axion Barra *450GR CJ*24", p: 6170 },
        { id: 46, n: "Lavaloza Axion Barra *850GR CJ*12", p: 11575 },
        { id: 47, n: "Lavaloza Liquido 123 *500ML CJ*12", p: 3195 },
        { id: 48, n: "Lavaloza Patojito *235GR CJ*36", p: 2280 },
        { id: 49, n: "Lavaloza Patojito *450GR CJ*36", p: 3695 },
        { id: 50, n: "Lavaloza Patojito *850GR CJ*18", p: 7485 }
    ];

    function updateDate() {
        const opciones = { timeZone: 'America/Bogota', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
        document.getElementById('fecha').innerText = new Date().toLocaleString('es-CO', opciones);
    }
    setInterval(updateDate, 60000);
    updateDate();

    const container = document.getElementById('lista');
    function render() {
        PRODUCTOS.forEach(p => {
            const div = document.createElement('div');
            div.className = 'item';
            div.setAttribute('data-n', p.n.toLowerCase());
            div.innerHTML = `
                <div class="item-info"><b>${p.n}</b>$${p.p.toLocaleString()} / Unidad</div>
                <input type="number" class="qty" id="qty-${p.id}" placeholder="0" oninput="calc()">
            `;
            container.appendChild(div);
        });
    }

    function filtrar() {
        const q = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.item').forEach(i => {
            i.style.display = i.getAttribute('data-n').includes(q) ? 'flex' : 'none';
        });
    }

    function calc() {
        let total = 0;
        PRODUCTOS.forEach(p => {
            const q = document.getElementById(`qty-${p.id}`).value || 0;
            total += q * p.p;
        });
        document.getElementById('totalDisplay').innerText = `$${total.toLocaleString()}`;
    }

    function enviar() {
        const cli = document.getElementById('cliente').value;
        const tie = document.getElementById('tienda').value;
        const dir = document.getElementById('dir').value;
        const ven = document.getElementById('vend').value;
        const fec = document.getElementById('fecha').innerText;

        if(!cli || !tie || !dir) return alert("Por favor llena Nombre, Tienda y DirecciÃ³n.");

        let msg = `*FACTURA DE PEDIDO - EDOGRA*\n`;
        msg += `--------------------------------\n`;
        msg += `*Fecha:* ${fec}\n`;
        msg += `*Cliente:* ${cli}\n`;
        msg += `*Tienda:* ${tie}\n`;
        msg += `*DirecciÃ³n:* ${dir}\n`;
        msg += `*Vendedor:* ${ven}\n`;
        msg += `--------------------------------\n\n`;

        let subtotal = 0;
        PRODUCTOS.forEach(p => {
            const q = document.getElementById(`qty-${p.id}`).value;
            if(q > 0) {
                const sub = q * p.p;
                msg += `ðŸ”¹ ${p.n}\n   ${q} x $${p.p.toLocaleString()} = *$${sub.toLocaleString()}*\n`;
                subtotal += sub;
            }
        });

        if(subtotal === 0) return alert("El pedido estÃ¡ vacÃ­o.");

        msg += `\n--------------------------------\n`;
        msg += `*TOTAL FACTURADO: $${subtotal.toLocaleString()}*\n`;
        msg += `--------------------------------\n`;
        msg += `Â¡Muchas gracias por su pedido!\n\n`;
        msg += `_App desarrollada por Vibras Positivas_`;

        window.open(`https://wa.me/57317849331?text=${encodeURIComponent(msg)}`);
    }

    render();
</script>
</body>
</html>
